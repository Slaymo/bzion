{% macro widget(player, attrs, showTeam, showActivity) %}
    {% from 'utilities.html.twig' import html_attr %}

    {% set attrs = attrs | extend_hash({ 'class': ['c-player-badge'] }) %}

    {# Using the `default()` filter for booleans doesn't work as expected; we want this boolean to default to false #}
    {#   see: https://stackoverflow.com/a/10794782 #}
    {% set showActivity = showActivity is not defined or showActivity is null ? false : showActivity %}
    {% set showTeam     = showTeam     is not defined or showTeam     is null ? false : showTeam %}

    <div {{ html_attr(attrs) }}>
        <img class="c-player-badge__avatar"
             src="{{ player.avatar | imagine_filter('small_thumb') }}"
             alt="{{ player.name }}'s avatar"
        >

        <div>
            <div class="c-player-badge__callsign">
                <span>{{ link_to(player) }}</span> {{ player.country.flagLiteral | raw }}
            </div>

            {% if showTeam or showActivity %}
                <p class="c-player-badge__team">
                    {% if showTeam %}
                        {{ link_to(player.team) }}
                    {% endif %}

                    {% if showActivity %}
                        {% if showTeam %}&bull;{% endif %}

                        {{ player.matchActivity | number_format(2) }}
                    {% endif %}
                </p>
            {% endif %}
        </div>
    </div>
{% endmacro %}
